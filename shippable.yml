---
cache: false

language: php

php:
  - 5.5

before_install:
  # Install composer
  - curl -sS https://getcomposer.org/installer | php
  - composer self-update
  - composer config --global github-oauth.github.com 26581746c33b5e7ab1f5e0c33b4fdc186c050292
  # Install drush
  - composer global require drush/drush:6.5.0
  - sudo ln -s ~/.composer/vendor/bin/drush /usr/local/bin
  - drush cc drush
  # Get Coder 7.x-2.x version
  - composer global require drupal/coder:\<8
  # Make the phpcs and phpcbf commands globally available
  - sudo ln -s ~/.composer/vendor/bin/phpcs /usr/local/bin
  - sudo ln -s ~/.composer/vendor/bin/phpcbf /usr/local/bin
  # Register the Drupal and DrupalPractice Standard with PHPCS
  - phpcs --config-set installed_paths ~/.composer/vendor/drupal/coder/coder_sniffer

 script:
  - phpcs --standard=Drupal -n --extensions='module,install,profile,php,inc' docroot || exit 1